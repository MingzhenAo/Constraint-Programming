\documentclass[11pt, a4paper]{book}
\usepackage{graphicx} 
\usepackage{}
\usepackage[toc,page]{appendix}
\usepackage[square,sort,comma,numbers]{natbib}
\usepackage[pdftex,usenames,dvipsnames]{color}
\usepackage{paralist}
\usepackage{tabularx}
\usepackage{pdfpages}
\newcommand{\VUnits} {\ensuremath{V_{units}}}
\newcommand{\VPegs} {\ensuremath{V_{pegs}}}
\newcommand{\Constraints}[2] {\ensuremath{C_{v_{#1},v_{#2}}}}
\newcommand{\Cons}[5] {\ensuremath{C_{v_{#1},v_{#2},v_{#3},v_{#4},v_{#5}}}}
\newcommand{\Con}[3] {\ensuremath{C_{v_{#1},v_{#2},v_{#3}}}}
\newcommand{\Const}[4] {\ensuremath{C_{v_{#1},v_{#2},v_{#3},v_{#4}}}}
\newcommand{\Constraint}[1] {\ensuremath{C_{v_{#1}}}}
\newcommand{\Domain}[1] {\ensuremath{D(v_{#1})}}
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,draw,inner sep=2pt] (char) {#1};}}
\input{config}
\input{macros}
\definecolor{ForestGreen}{RGB}{34,106,46}

\lstdefinelanguage{minizinc}{
    morekeywords={
        %% MiniZinc keywords
        %%
        ann, annotation, any, array, assert,
        bool,
        constraint,
        else, elseif, endif, enum, exists,
        float, forall, function,
        if, in, include, int,
        list,
        minimize, maximize,
        of, op, output,
        par, predicate,
        record,
        set, solve, string,
        test, then, tuple, type,
        var,
        where,
        %% MiniZinc functions
        %%
        abort, abs, acosh, array_intersect, array_union,
        array1d, array2d, array3d, array4d, array5d, array6d, asin, assert, atan,
        bool2int,
        card, ceil, combinator, concat, cos, cosh,
        dom, dom_array, dom_size, dominance,
        exp,
        fix, floor,
        index_set, index_set_1of2, index_set_2of2, index_set_1of3, index_set_2of3, index_set_3of3,
        int2float, is_fixed,
        join,
        lb, lb_array, length, let, ln, log, log2, log10,
        min, max,
        pow, product,
        round,
        set2array, show, show_int, show_float, sin, sinh, sqrt, sum,
        tan, tanh, trace,
        ub, and ub_array,
        %% Search keywords
        %%
        bool_search, int_search, seq_search, priority_search,
        %% MiniSearch keywords
        %%
        minisearch, search, while, repeat, next, commit, print, post, sol, scope, time_limit, break, fail
    },
    sensitive=true, % are the keywords case sensitive
    morecomment=[l][\em\color{ForestGreen}]{\%},
    %morecomment=[s]{/*}{*/},
    morestring=[b]",
}
%% Settings for listings
%%
\lstset{ %
    backgroundcolor=\color{lightgray!40},  % choose the background color; you must add
                                        % \usepackage{color} or \usepackage{xcolor}
    basicstyle=\scriptsize\ttfamily,    % the size of the fonts that are used for the code
    belowskip=-2em,
    breakatwhitespace=false,            % sets if automatic breaks should only happen at whitespace
    breaklines=true,                    % sets automatic line breaking
    captionpos=b,                       % sets the caption-position to bottom
    commentstyle=\color{ForestGreen},   % comment style
    %deletekeywords={...},              % if you want to delete keywords from the given language
    escapeinside={\%*}{*)},             % if you want to add LaTeX within your code
    extendedchars=true,                 % lets you use non-ASCII characters; for 8-bits
                                        % encodings only, does not work with UTF-8
    frame=single,                       % adds a frame around the code
    keepspaces=true,                    % keeps spaces in text, useful for keeping indentation
                                        % of code (possibly needs columns=flexible)
    keywordstyle=\bfseries\color{blue}, % keyword style
    language=minizinc,                  % the language of the code
    %morekeywords={*,...},              % if you want to add more keywords to the set
    numbers=left,                       % where to put the line-numbers; possible values are (none, left, right)
    %numbersep=5pt,                     % how far the line-numbers are from the code
    %numberstyle=\tiny\color{Gray},     % the style that is used for the line-numbers
    rulecolor=\color{black},            % if not set, the frame-color may be changed
                                        % on line-breaks within not-black text (e.g. comments (green here))
    showspaces=false,                   % show spaces everywhere adding particular
                                        % underscores; it overrides 'showstringspaces'
    showstringspaces=false,             % underline spaces within strings only
    showtabs=false,                     % show tabs within strings adding particular underscores
    %stepnumber=1,                      % the step between two line-numbers. If it's 1, each line will be numbered
    stringstyle=\color{Red},            % string literal style
    tabsize=2,                          % sets default tabsize to 2 spaces
    title=\lstname                      % show the filename of files included with \lstinputlisting;
                                        % also try caption instead of title
}
\allowdisplaybreaks
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Preamble
\title{Solving Puzzle Games with CSP Solvers}
\author{Mingzhen Ao}
\date{\today}

\renewcommand{\thepage}{\roman{page}}

\makeindex
\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Title page
\pagestyle{empty}
\thispagestyle{empty}
\input{titlepage}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Here begin the preliminaries
\input{frontmatter}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Acknowledgements
\cleardoublepage
\pagestyle{empty}
\input{ack}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Abstract
\cleardoublepage
\pagestyle{headings}
\input{abstract}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Table of contents
\cleardoublepage
\microtypesetup{protrusion=false}  % make sure numbers align in TOC
\pagestyle{headings}
\markboth{Contents}{Contents}
\tableofcontents
\listoffigures
\listoftables
\microtypesetup{protrusion=true}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Here begins the main text
\mainmatter

%% Introduction
\input{intro}

%% Chapters
\input{background}
\input{design}
\input{evaluation}
\input{conclusion}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Here begins the end matter

\backmatter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Bibliography
\cleardoublepage
\phantomsection
\bibliographystyle{IEEEtran}
\bibliography{report}
\input{Appendix}
\printindex
\end{document}
